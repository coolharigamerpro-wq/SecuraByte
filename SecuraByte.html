<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SecuraByte ðŸ”’</title>
<style>
:root{--bg:#0f1724;--card:#0b1220;--muted:#94a3b8;--accent:#7c3aed;--glass:rgba(255,255,255,0.04)}
html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
body{background:linear-gradient(180deg,#071025 0%,#08162a 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:28px}
.card{width:100%;max-width:980px;background:var(--card);border-radius:12px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
h1{margin:0 0 8px;font-size:20px}
p.lead{color:var(--muted);margin-top:0;margin-bottom:18px}
.grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
.panel{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
select,input[type=text],input[type=password],textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:14px}
textarea{min-height:140px;resize:vertical}
.muted{font-size:13px;color:var(--muted)}
.row{display:flex;gap:8px}
button{background:var(--accent);border:none;padding:10px 12px;border-radius:8px;color:white;font-weight:600;cursor:pointer}
button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
.filedrop{border:1px dashed rgba(255,255,255,0.06);padding:14px;border-radius:8px;text-align:center;color:var(--muted);cursor:pointer}
.small{font-size:13px;color:var(--muted)}
.output{background:var(--glass);padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);min-height:80px;overflow:auto}
.footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
.danger{color:#ffb3b3}
.success{color:#b7ffcf}
.hint{font-size:12px;color:var(--muted)}
.controls{display:flex;gap:8px;flex-wrap:wrap}
</style>
</head>
<body>
<div class="card">
<h1>SecuraByte ðŸ”’</h1>
<p class="lead">Encrypt/decrypt text or files in your browser using Web Crypto. Password-based key derivation (PBKDF2).</p>
<div class="grid">
<div class="panel">
<label>Mode</label>
<div class="row" style="margin-bottom:10px">
<select id="algo">
<option value="AES-GCM">AES-GCM</option>
</select>
<select id="keySize">
<option value="128">AES-128</option>
<option value="256" selected>AES-256</option>
</select>
<select id="iterations">
<option value="100000">PBKDF2 - 100k</option>
<option value="200000">PBKDF2 - 200k</option>
<option value="400000">PBKDF2 - 400k</option>
</select>
</div>
<label>Password</label>
<input id="password" type="password" placeholder="Type a strong password..." />
<div style="height:8px"></div>
<label>Plain text (or leave empty and import a file)</label>
<textarea id="plaintext" placeholder="Enter text to encrypt..."></textarea>
<div style="height:8px"></div>
<label>Or drop / choose a file</label>
<div id="filedrop" class="filedrop">Drop a file here or click to choose</div>
<input type="file" id="fileInput" style="display:none" />
<div style="height:10px"></div>
<div class="controls">
<button id="encryptBtn">Encrypt</button>
<button id="decryptBtn" class="ghost">Decrypt</button>
<button id="clearBtn" class="ghost">Clear</button>
<button id="downloadBtn" class="ghost" title="Download last encrypted/decrypted payload">Download</button>
<button id="copyBtn" class="ghost">Copy Output</button>
</div>
<div style="height:10px"></div>
<label>Output</label>
<div id="output" class="output"></div>
<div class="footer">
<div class="hint">Format: JSON with base64 fields (salt, iv, ciphertext). Use the same password + settings to decrypt.</div>
<div style="font-size:12px;color:var(--muted)">v1 â€¢ In-browser only â€” nothing leaves your machine</div>
</div>
</div>
<div class="panel">
<h3 style="margin-top:0">Info & Options</h3>
<p class="muted">How it works:
<ul class="muted">
<li>Generates random salt + IV.</li>
<li>Derives an AES key with PBKDF2 (SHA-256) from your password.</li>
<li>Encrypts using AES-GCM (authenticated encryption).</li>
</ul>
</p>
<h4>Advanced</h4>
<label>Encoding</label>
<select id="encoding"><option value="base64">Base64 (recommended)</option><option value="hex">Hex</option></select>
<div style="height:10px"></div>
<label>Last action info</label>
<div id="lastinfo" class="output" style="min-height:60px"></div>
<div style="height:10px"></div>
<h4>Credits</h4>
<p class="muted">Created by Hariharshan Prathap â€¢ <a href="https://www.youtube.com/@MeteorGaming96" target="_blank" style="color:var(--accent)">YouTube Channel</a></p>
<h4>Security tips</h4>
<ul class="muted">
<li>Use a long random password or passphrase (12+ chars).</li>
<li>Increase PBKDF2 iterations for more brute-force resistance.</li>
<li>Keep encrypted outputs and your password separate.</li>
</ul>
</div>
</div>
</div>
<script>
const enc=new TextEncoder();
const dec=new TextDecoder();
function toBase64(buf){return btoa(String.fromCharCode(...new Uint8Array(buf)));}
function fromBase64(str){const bin=atob(str);const arr=new Uint8Array(bin.length);for(let i=0;i<bin.length;i++)arr[i]=bin.charCodeAt(i);return arr.buffer;}
function toHex(buf){return [...new Uint8Array(buf)].map(b=>b.toString(16).padStart(2,'0')).join('')}
function fromHex(hex){const arr=new Uint8Array(hex.length/2);for(let i=0;i<arr.length;i++)arr[i]=parseInt(hex.substr(i*2,2),16);return arr.buffer;}
async function deriveKey(password,salt,iterations,keyLen){const passKey=await crypto.subtle.importKey('raw',enc.encode(password),'PBKDF2',false,['deriveKey']);return crypto.subtle.deriveKey({name:'PBKDF2',salt,iterations,hash:'SHA-256'},passKey,{name:'AES-GCM',length:keyLen},false,['encrypt','decrypt']);}
async function encryptData(plainBuffer,password,algoSettings){const salt=crypto.getRandomValues(new Uint8Array(16));const iv=crypto.getRandomValues(new Uint8Array(12));const key=await deriveKey(password,salt.buffer,algoSettings.iterations,algoSettings.keyLen);const ciphertext=await crypto.subtle.encrypt({name:'AES-GCM',iv},key,plainBuffer);return {salt: salt.buffer, iv: iv.buffer, ciphertext};}
async function decryptData(payload,password,algoSettings){const key=await deriveKey(password,payload.salt,algoSettings.iterations,algoSettings.keyLen);return await crypto.subtle.decrypt({name:'AES-GCM',iv:payload.iv},key,payload.ciphertext);}
const plaintextEl=document.getElementById('plaintext');
const passwordEl=document.getElementById('password');
const keySizeEl=document.getElementById('keySize');
const iterationsEl=document.getElementById('iterations');
const outputEl=document.getElementById('output');
const lastinfoEl=document.getElementById('lastinfo');
const encodingEl=document.getElementById('encoding');
let lastPayload=null;
let lastPlainName='data.txt';
function showLastInfo(obj){lastinfoEl.textContent=JSON.stringify(obj,null,2);}
async function handleEncrypt(){try{const password=passwordEl.value;if(!password){alert('Please provide a password.');return}const keyLen=parseInt(keySizeEl.value,10);const iterations=parseInt(iterationsEl.value,10);const algoSettings={keyLen,iterations};let sourceBuffer;let filename='data.txt';if(window._loadedFileBuffer){sourceBuffer=window._loadedFileBuffer;filename=window._loadedFileName}else{sourceBuffer=enc.encode(plaintextEl.value).buffer}const res=await encryptData(sourceBuffer,password,algoSettings);const encType=encodingEl.value;const packageObj={fmt:'securabyte:v1',alg:'AES-GCM',keyBits:keyLen,iterations,salt:encType==='base64'?toBase64(res.salt):toHex(res.salt),iv:encType==='base64'?toBase64(res.iv):toHex(res.iv),ciphertext:encType==='base64'?toBase64(res.ciphertext):toHex(res.ciphertext),filename:filename};outputEl.textContent=JSON.stringify(packageObj,null,2);lastPayload=packageObj;showLastInfo({action:'encrypt',alg:'AES-GCM',keyBits:keyLen,iterations});}catch(e){console.error(e);alert('Encryption failed: '+e.message);}}
async function handleDecrypt(){try{const password=passwordEl.value;if(!password){alert('Please provide a password.');return}let txt=plaintextEl.value.trim();if(!txt){txt=outputEl.textContent.trim()}if(!txt){alert('Provide the encrypted JSON in Output or paste it into the text area.');return}const pkg=JSON.parse(txt);if(pkg.fmt!=='securabyte:v1')throw new Error('Unrecognized format');const encType=encodingEl.value;const salt=encType==='base64'?fromBase64(pkg.salt):fromHex(pkg.salt);const iv=encType==='base64'?fromBase64(pkg.iv):fromHex(pkg.iv);const ciphertext=encType==='base64'?fromBase64(pkg.ciphertext):fromHex(pkg.ciphertext);const algoSettings={keyLen:pkg.keyBits,iterations:pkg.iterations};let plainBuf;try{plainBuf=await decryptData({salt,iv,ciphertext},password,algoSettings);}catch(e){alert('Wrong password or corrupted file');return;}if(pkg.filename){const blob=new Blob([plainBuf]);const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=pkg.filename||'decrypted.bin';document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);showLastInfo({action:'decrypt',result:'downloaded file',filename:pkg.filename});outputEl.textContent='Decrypted file downloaded: '+(pkg.filename||'decrypted.bin');lastPayload=null}else{const text=dec.decode(plainBuf);outputEl.textContent=text;showLastInfo({action:'decrypt',result:'text displayed'});lastPayload=null}}catch(e){console.error(e);alert('Decryption failed: '+e.message);}}
function handleClear(){plaintextEl.value='';outputEl.textContent='';passwordEl.value='';window._loadedFileBuffer=null;window._loadedFileName=null;lastPayload=null;showLastInfo({});}
function downloadLast(){if(!lastPayload){alert('No encrypted payload available to download. Encrypt first.');return}const blob=new Blob([JSON.stringify(lastPayload,null,2)],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=(lastPayload.filename?lastPayload.filename+'.enc':'encrypted.json');document.body.appendChild(a);a.click();a.remove();}
function copyOutput(){navigator.clipboard.writeText(outputEl.textContent).then(()=>alert('Copied to clipboard')).catch(()=>alert('Could not copy'));}
const filedrop=document.getElementById('filedrop');
const fileInput=document.getElementById('fileInput');
filedrop.addEventListener('click',()=>fileInput.click());
fileInput.addEventListener('change',async(e)=>{if(e.target.files.length)await loadFile(e.target.files[0]);});
filedrop.addEventListener('dragover',(e)=>{e.preventDefault();filedrop.style.borderColor='#6ee7b7';});
filedrop.addEventListener('dragleave',()=>{filedrop.style.borderColor='';});
filedrop.addEventListener('drop',async(e)=>{e.preventDefault();filedrop.style.borderColor='';if(e.dataTransfer.files.length)await loadFile(e.dataTransfer.files[0]);});
async function loadFile(file){const buf=await file.arrayBuffer();window._loadedFileBuffer=buf;window._loadedFileName=file.name;plaintextEl.value='';filedrop.textContent=`Loaded: ${file.name} â€” ${Math.round(buf.byteLength/1024)} KB`;showLastInfo({loadedFile:file.name,size:buf.byteLength});}
document.getElementById('encryptBtn').addEventListener('click',handleEncrypt);
document.getElementById('decryptBtn').addEventListener('click',handleDecrypt);
document.getElementById('clearBtn').addEventListener('click',handleClear);
document.getElementById('downloadBtn').addEventListener('click',downloadLast);
document.getElementById('copyBtn').addEventListener('click',copyOutput);
showLastInfo({note:'ready'});
</script>
</body>
</html>
